<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /

# Serve assets from public when docroot is project root
RewriteRule ^assets/(.*)$ public/assets/$1 [L]

# Serve existing files/directories
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]

# Route everything else to public/index.php
RewriteRule ^ public/index.php [L]
</IfModule>

Options -Indexes

<IfModule mod_rewrite.c>
    RewriteEngine On

    # Force canonical host + HTTPS (supports proxies via X-Forwarded-Proto)
    RewriteCond %{HTTP_HOST} !^channl\.sagejyoung\.com$ [OR]
    RewriteCond %{HTTPS} !=on [OR]
    RewriteCond %{HTTP:X-Forwarded-Proto} !https
    RewriteRule ^ https://channl.sagejyoung.com%{REQUEST_URI} [R=301,L]

    # Route all requests to public/
    RewriteCond %{REQUEST_URI} !^/public/
    RewriteRule ^(.*)$ public/$1 [L]

    DirectoryIndex public/index.php
</IfModule>

